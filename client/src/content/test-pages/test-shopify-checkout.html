<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Shopify-Style Checkout Test Page</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .checkout-container {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .order-summary {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #e1e1e1;
    }
    .total-line {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
      font-size: 16px;
    }
    .total-line__label {
      font-weight: 500;
    }
    .total-line__price {
      font-weight: 600;
    }
    .grand-total {
      font-size: 20px;
      margin-top: 15px;
      padding-top: 15px;
      border-top: 2px solid #333;
    }
    .discount-line {
      color: #1a7f37;
      display: none;
    }
    .discount-line.active {
      display: flex;
    }
    .coupon-section {
      margin: 20px 0;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 4px;
    }
    .coupon-input {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 14px;
      margin-bottom: 10px;
    }
    .apply-button {
      background: #5469d4;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
    }
    .apply-button:hover {
      background: #4355c8;
    }
    .message {
      margin-top: 10px;
      padding: 10px;
      border-radius: 4px;
      display: none;
    }
    .message.success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
      display: block;
    }
    .message.error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
      display: block;
    }
  </style>
</head>
<body>
  <div class="checkout-container">
    <h1>Checkout</h1>

    <div class="coupon-section">
      <label for="coupon-code">Discount Code</label>
      <input
        type="text"
        id="coupon-code"
        class="coupon-input"
        placeholder="Enter discount code"
        name="discount"
      >
      <button class="apply-button" id="apply-coupon">Apply</button>
      <div class="message" id="coupon-message"></div>
    </div>

    <div class="order-summary">
      <h2>Order Summary</h2>

      <div class="total-line">
        <span class="total-line__label">Subtotal</span>
        <span class="total-line__price">$100.00</span>
      </div>

      <div class="total-line discount-line" id="discount-line">
        <span class="total-line__label">Discount</span>
        <span class="total-line__price" id="discount-amount">-$0.00</span>
      </div>

      <div class="total-line">
        <span class="total-line__label">Shipping</span>
        <span class="total-line__price">$10.00</span>
      </div>

      <div class="total-line grand-total">
        <span class="total-line__label">Total</span>
        <span class="total-line__price" id="grand-total">$110.00</span>
      </div>
    </div>
  </div>

  <script>
    // Test coupons with different discounts
    const validCoupons = {
      'SAVE10': 10.00,
      'SAVE20': 20.00,
      'SAVE30': 30.00,
      'HALFOFF': 50.00,
    };

    const applyButton = document.getElementById('apply-coupon');
    const couponInput = document.getElementById('coupon-code');
    const messageDiv = document.getElementById('coupon-message');
    const grandTotalElement = document.getElementById('grand-total');
    const discountLine = document.getElementById('discount-line');
    const discountAmount = document.getElementById('discount-amount');

    let currentDiscount = 0;

    applyButton.addEventListener('click', function() {
      const code = couponInput.value.trim().toUpperCase();

      // Clear previous message
      messageDiv.className = 'message';
      messageDiv.textContent = '';

      if (!code) {
        messageDiv.className = 'message error';
        messageDiv.textContent = 'Please enter a coupon code';
        return;
      }

      // Simulate processing delay
      applyButton.disabled = true;
      applyButton.textContent = 'Applying...';

      setTimeout(() => {
        if (validCoupons[code]) {
          // Valid coupon
          currentDiscount = validCoupons[code];
          const newTotal = 110.00 - currentDiscount;

          discountAmount.textContent = `-$${currentDiscount.toFixed(2)}`;
          discountLine.classList.add('active');
          grandTotalElement.textContent = `$${newTotal.toFixed(2)}`;

          messageDiv.className = 'message success';
          messageDiv.textContent = `Coupon applied successfully! You saved $${currentDiscount.toFixed(2)}`;
        } else {
          // Invalid coupon
          messageDiv.className = 'message error';
          messageDiv.textContent = 'Invalid coupon code';
        }

        applyButton.disabled = false;
        applyButton.textContent = 'Apply';
      }, 1000);
    });

    // Support Enter key
    couponInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        applyButton.click();
      }
    });
  </script>
</body>
</html>
